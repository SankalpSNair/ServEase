{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> </title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'adm_assets/css/bootstrap.css' %}">

    <link rel="stylesheet" href="{% static 'adm_assets/vendors/iconly/bold.css'%}">

    <link rel="stylesheet" href="{% static 'adm_assets/vendors/perfect-scrollbar/perfect-scrollbar.css' %}">
    <link rel="stylesheet" href="{% static 'adm_assets/vendors/bootstrap-icons/bootstrap-icons.css' %}">
    <link rel="stylesheet" href="{% static 'adm_assets/css/app.css' %}">
    <link rel="shortcut icon" href="{% static 'adm_assets/images/favicon.svg' %}" type="image/x-icon">
</head>

<body>
    <div id="app">
        <div id="sidebar" class="active">
            <div class="sidebar-wrapper active">
                <div class="sidebar-header">
                    <div class="d-flex justify-content-between">
                        <div class="logo">
                            <a href="#">ServEase</a>
                        </div>
                        <div class="toggler">
                            <a href="#" class="sidebar-hide d-xl-none d-block"><i class="bi bi-x bi-middle"></i></a>
                        </div>
                    </div>
                </div>

<!-- DashboardPage -->

<div class="sidebar-menu">
    <ul class="menu">
        <li class="sidebar-title">Menu</li>

        <li class="sidebar-item active ">
            <a href="{% url 'dashboard' %}" class='sidebar-link'>
                <i class="bi bi-grid-fill"></i>
                <span>Dashboard</span>
            </a>
        </li>
<!-- View Users  -->
        <li class="sidebar-item  has-sub">
            <a href="#" class='sidebar-link'>
                <i class="bi bi-stack"></i>
                <span>View Users</span>
            </a>
            <ul class="submenu ">
                <!-- <li class="submenu-item ">
                    <a href="{%url 'full_users'%}">All Users</a>
                </li> -->
                <li class="submenu-item ">
                    <a href="{%url 'full_customers'%}">Customers</a>
                </li>
                <li class="submenu-item ">
                    <a href="{%url 'full_workers'%}">Workers</a>
                </li>
            </ul>
        </li>
<!-- Booking  -->
        <li class="sidebar-item  has-sub">
            <a href="#" class='sidebar-link'>
                <i class="bi bi-collection-fill"></i>
                <span>View Bookings</span>
            </a>
            <ul class="submenu ">
                <li class="submenu-item ">
                    <a href="{%url 'new_bookings'%}">New Requests</a>
                </li>
                <li class="submenu-item ">
                    <a href="#">Allocated Bookings</a>
                </li>
                <li class="submenu-item ">
                    <a href="#">All Bookings</a>
                </li>
            </ul>
        </li>
<!-- Manage Customers  -->
        <!-- <li class="sidebar-item ">
            <a href="{%url 'manage_customers'%}" class='sidebar-link'>
                <i class="bi bi-stack"></i>
                <span>Manage Customers</span>
            </a>
        </li> -->
<!-- Manage Workers  -->
        <li class="sidebar-item  has-sub">
            <a href="#" class='sidebar-link'>
                <i class="bi bi-stack"></i>
                <span>Manage Workers</span>
            </a>
            <ul class="submenu ">
                <li class="submenu-item ">
                    <a href="{% url 'manage_home_nurses' %}">Home Nurse</a>
                </li>
                <li class="submenu-item ">
                    <a href="{% url 'manage_house_maids' %}">House Maid</a>
                </li>
                <li class="submenu-item ">
                    <a href="{% url 'manage_electricians' %}">Electrician</a>
                </li>
                <li class="submenu-item ">
                    <a href="{% url 'manage_plumbers' %}">Plumber</a>
                </li>
                <li class="submenu-item ">
                    <a href="{% url 'manage_carpenters' %}">Carpenter</a>
                </li>
            </ul>
        </li>
        <li class="sidebar-item ">
            <a href="{%url 'view_verification'%}" class='sidebar-link'>
                <i class="bi bi-stack"></i>
                <span>Verification</span>
            </a>
        </li>
        <!-- Report Generation -->
        <li class="sidebar-item ">
            <a href="{% url 'report_generation' %}" class='sidebar-link'>
                <i class="bi bi-file-earmark-text"></i>
                <span>Report Generation</span>
            </a>
        </li>
</div>
<button class="sidebar-toggler btn x"><i data-feather="x"></i></button>
</div>
</div>

        <div id="main">
            <header class="mb-3">
                <a href="#" class="burger-btn d-block d-xl-none">
                    <i class="bi bi-justify fs-3"></i>
                </a>
            </header>

            <div class="page-heading">
                <div class="page-title">
                    <div class="row">
                        <div class="col-12 col-md-6 order-md-1 order-last">
                            <h3>Edit Details of {{ nurse.firstname }}</h3>
                            <p class="text-subtitle text-muted">Update the details of home nurse</p>
                        </div>
                        <div class="col-12 col-md-6 order-md-2 order-first">
                            <nav aria-label="breadcrumb" class="breadcrumb-header float-start float-lg-end">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Update</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>

                <!-- Basic multiple Column Form section start -->
                <section id="multiple-column-form">
                    <div class="row match-height">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">Edit the Details Below</h4>
                                </div>
                                <div class="card-content">
                                    <div class="card-body">
                                        <form method="post" class="form">
                                            {% csrf_token %}
                                            <div class="row">
                                                <div class="col-md-6 col-12">
                                                    <div class="form-group">
                                                        <label for="first-name-column">First Name</label>
                                                        <input type="text" id="first-name-column" class="form-control" 
                                                            placeholder="First Name" name="firstname" 
                                                            value="{{ nurse.firstname }}" readonly>
                                                        <div id="firstname-error" class="error-message text-danger"></div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-12">
                                                    <div class="form-group">
                                                        <label for="last-name-column">Last Name</label>
                                                        <input type="text" id="last-name-column" class="form-control" 
                                                            placeholder="Last Name" name="lastname" 
                                                            value="{{ nurse.lastname }}" readonly>
                                                        <div id="lastname-error" class="error-message text-danger"></div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-12">
                                                    <div class="form-group">
                                                        <label for="email-id-column">Email</label>
                                                        <input type="email" id="email-id-column" class="form-control" 
                                                            placeholder="Email" name="email" 
                                                            value="{{ nurse.email }}" readonly>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-12">
                                                    <div class="form-group">
                                                        <label for="phone-column">Phone</label>
                                                        <input type="text" id="phone-column" class="form-control" 
                                                            placeholder="Phone" name="phone" 
                                                            value="{{ nurse.phone }}" required>
                                                        <div id="phone-error" class="error-message text-danger"></div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-12">
                                                    <div class="form-group">
                                                        <label for="experience-column">Experience (select 1year even if experience is < 1year)</label>
                                                        <input type="text" id="experience-column" class="form-control" 
                                                            placeholder="Experience" name="experience" 
                                                            value="{{ nurse.experience }}" required>
                                                        <div id="experience-error" class="error-message text-danger"></div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-12">
                                                    <div class="form-group">
                                                        <label for="availability-column">Availability</label>
                                                        <select id="availability-column" class="form-control" name="availability" required>
                                                            <option value="1" {% if nurse.availability %}selected{% endif %}>Available</option>
                                                            <option value="0" {% if not nurse.availability %}selected{% endif %}>Not Available</option>
                                                        </select>
                                                        <div id="availability-error" class="error-message text-danger"></div>
                                                    </div>
                                                </div>
                                                <div class="col-12 d-flex justify-content-end">
                                                    <button type="submit" class="btn btn-primary me-1 mb-1">Save Changes</button>
                                                    <button type="reset" class="btn btn-light-secondary me-1 mb-1">Reset</button>
                                                </div>
                                            </div>
                                        </form>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- // Basic multiple Column Form section end -->
            </div>

            <footer>
                <div class="footer clearfix mb-0 text-muted">
                    <div class="float-start">
                      
                    </div>
                    <div class="float-end">
                      
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form');
            form.addEventListener('submit', function(event) {
                let isValid = true;
                
                // Get form field values
                const firstname = document.getElementById('first-name-column').value;
                const lastname = document.getElementById('last-name-column').value;
                const phone = document.getElementById('phone-column').value;
                const experience = document.getElementById('experience-column').value;
                const availability = document.getElementById('availability-column').value;
                
                // Clear previous errors
                document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
                
                // Validate First Name
                if (!/^[a-zA-Z\s]+$/.test(firstname)) {
                    document.getElementById('firstname-error').textContent = 'First name should not contain numbers or special characters.';
                    isValid = false;
                }
                
                // Validate Last Name
                if (!/^[a-zA-Z\s]+$/.test(lastname)) {
                    document.getElementById('lastname-error').textContent = 'Last name should not contain numbers or special characters.';
                    isValid = false;
                }
                
                // Validate Phone Number
                if (!/^\d{10}$/.test(phone)) {
                    document.getElementById('phone-error').textContent = 'Phone number must be exactly 10 digits.';
                    isValid = false;
                }
                
                // Validate Experience
                if (isNaN(experience) || experience < 1 || experience > 35) {
                    document.getElementById('experience-error').textContent = 'Experience must be between 1 and 35 years.';
                    isValid = false;
                }
                
                // Validate Availability
                if (![0, 1].includes(Number(availability))) {
                    document.getElementById('availability-error').textContent = 'Availability must be either 0 or 1.';
                    isValid = false;
                }
                
                if (!isValid) {
                    event.preventDefault(); // Prevent form submission if validation fails
                }
            });
        });
    </script>
    <script src="{% static 'adm_assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js' %}"></script>
    <script src="{% static 'adm_assets/js/bootstrap.bundle.min.js' %}"></script>

    <script src="{% static 'adm_assets/vendors/apexcharts/apexcharts.js' %}"></script>
    <script src="{% static 'adm_assets/js/pages/dashboard.js' %}"></script>

    <script src="{% static 'adm_assets/js/main.js' %}"></script>

    <script src="{% static 'adm_assets/js/main.js'%}"></script>
</body>

</html>